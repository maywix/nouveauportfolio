{"ast":null,"code":"import { EventEmitter } from \"@angular/core\";\nimport gsap from \"gsap\";\nimport * as i0 from \"@angular/core\";\nconst _c0 = [\"overlay\"];\nconst _c1 = [\"introVideo\"];\nexport class IntroOverlayComponent {\n  constructor(zone) {\n    this.zone = zone;\n    this.closed = new EventEmitter();\n    this.hasClosed = false;\n  }\n  ngAfterViewInit() {\n    this.attachVideoListeners();\n    this.scheduleFallbackHide();\n  }\n  ngOnDestroy() {\n    if (this.hideTimeoutId) {\n      window.clearTimeout(this.hideTimeoutId);\n    }\n  }\n  onSkip(event) {\n    event.preventDefault();\n    this.hideOverlay();\n  }\n  attachVideoListeners() {\n    const video = this.videoRef?.nativeElement;\n    if (!video) {\n      this.hideOverlay();\n      return;\n    }\n    video.addEventListener(\"error\", () => this.hideOverlay());\n    video.addEventListener(\"ended\", () => this.hideOverlay());\n  }\n  scheduleFallbackHide() {\n    this.zone.runOutsideAngular(() => {\n      this.hideTimeoutId = window.setTimeout(() => {\n        const video = this.videoRef?.nativeElement;\n        if (!video || video.readyState < 2) {\n          this.hideOverlay();\n        }\n      }, 3000);\n    });\n  }\n  hideOverlay() {\n    if (this.hasClosed) {\n      return;\n    }\n    this.hasClosed = true;\n    const overlayEl = this.overlayRef.nativeElement;\n    const video = this.videoRef?.nativeElement;\n    this.zone.runOutsideAngular(() => {\n      gsap.to(overlayEl, {\n        autoAlpha: 0,\n        duration: 0.6,\n        onComplete: () => {\n          overlayEl.classList.add(\"hidden\");\n          this.zone.run(() => {\n            this.closed.emit();\n          });\n        }\n      });\n      try {\n        video?.pause();\n      } catch (error) {\n        console.warn(\"Unable to pause intro video\", error);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function IntroOverlayComponent_Factory(t) {\n      return new (t || IntroOverlayComponent)(i0.ɵɵdirectiveInject(i0.NgZone));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: IntroOverlayComponent,\n      selectors: [[\"app-intro-overlay\"]],\n      viewQuery: function IntroOverlayComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 7);\n          i0.ɵɵviewQuery(_c1, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.overlayRef = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.videoRef = _t.first);\n        }\n      },\n      outputs: {\n        closed: \"closed\"\n      },\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 0,\n      vars: 0,\n      template: function IntroOverlayComponent_Template(rf, ctx) {},\n      styles: [\"[_nghost-%COMP%] {\\n  display: block;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9pbnRyby1vdmVybGF5L2ludHJvLW92ZXJsYXkuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGNBQWM7QUFDaEIiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["EventEmitter","gsap","IntroOverlayComponent","constructor","zone","closed","hasClosed","ngAfterViewInit","attachVideoListeners","scheduleFallbackHide","ngOnDestroy","hideTimeoutId","window","clearTimeout","onSkip","event","preventDefault","hideOverlay","video","videoRef","nativeElement","addEventListener","runOutsideAngular","setTimeout","readyState","overlayEl","overlayRef","to","autoAlpha","duration","onComplete","classList","add","run","emit","pause","error","console","warn","i0","ɵɵdirectiveInject","NgZone","selectors","viewQuery","IntroOverlayComponent_Query","rf","ctx"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/sitevassil/Sans titre/nouveauportfolio/src/app/components/intro-overlay/intro-overlay.component.ts"],"sourcesContent":["import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  NgZone,\n  OnDestroy,\n  Output,\n  ViewChild,\n} from \"@angular/core\";\nimport gsap from \"gsap\";\n\n@Component({\n  selector: \"app-intro-overlay\",\n  standalone: true,\n  templateUrl: \"./intro-overlay.component.html\",\n  styleUrl: \"./intro-overlay.component.css\",\n})\nexport class IntroOverlayComponent implements AfterViewInit, OnDestroy {\n  @Output() closed = new EventEmitter<void>();\n\n  @ViewChild(\"overlay\", { static: true })\n  private overlayRef!: ElementRef<HTMLDivElement>;\n\n  @ViewChild(\"introVideo\", { static: false })\n  private videoRef?: ElementRef<HTMLVideoElement>;\n\n  private hideTimeoutId?: number;\n  private hasClosed = false;\n\n  constructor(private readonly zone: NgZone) {}\n\n  ngAfterViewInit(): void {\n    this.attachVideoListeners();\n    this.scheduleFallbackHide();\n  }\n\n  ngOnDestroy(): void {\n    if (this.hideTimeoutId) {\n      window.clearTimeout(this.hideTimeoutId);\n    }\n  }\n\n  onSkip(event: Event): void {\n    event.preventDefault();\n    this.hideOverlay();\n  }\n\n  private attachVideoListeners(): void {\n    const video = this.videoRef?.nativeElement;\n    if (!video) {\n      this.hideOverlay();\n      return;\n    }\n\n    video.addEventListener(\"error\", () => this.hideOverlay());\n    video.addEventListener(\"ended\", () => this.hideOverlay());\n  }\n\n  private scheduleFallbackHide(): void {\n    this.zone.runOutsideAngular(() => {\n      this.hideTimeoutId = window.setTimeout(() => {\n        const video = this.videoRef?.nativeElement;\n        if (!video || video.readyState < 2) {\n          this.hideOverlay();\n        }\n      }, 3000);\n    });\n  }\n\n  private hideOverlay(): void {\n    if (this.hasClosed) {\n      return;\n    }\n    this.hasClosed = true;\n\n    const overlayEl = this.overlayRef.nativeElement;\n    const video = this.videoRef?.nativeElement;\n\n    this.zone.runOutsideAngular(() => {\n      gsap.to(overlayEl, {\n        autoAlpha: 0,\n        duration: 0.6,\n        onComplete: () => {\n          overlayEl.classList.add(\"hidden\");\n          this.zone.run(() => {\n            this.closed.emit();\n          });\n        },\n      });\n\n      try {\n        video?.pause();\n      } catch (error) {\n        console.warn(\"Unable to pause intro video\", error);\n      }\n    });\n  }\n}\n"],"mappings":"AAAA,SAIEA,YAAY,QAKP,eAAe;AACtB,OAAOC,IAAI,MAAM,MAAM;;;;AAQvB,OAAM,MAAOC,qBAAqB;EAYhCC,YAA6BC,IAAY;IAAZ,KAAAA,IAAI,GAAJA,IAAI;IAXvB,KAAAC,MAAM,GAAG,IAAIL,YAAY,EAAQ;IASnC,KAAAM,SAAS,GAAG,KAAK;EAEmB;EAE5CC,eAAeA,CAAA;IACb,IAAI,CAACC,oBAAoB,EAAE;IAC3B,IAAI,CAACC,oBAAoB,EAAE;EAC7B;EAEAC,WAAWA,CAAA;IACT,IAAI,IAAI,CAACC,aAAa,EAAE;MACtBC,MAAM,CAACC,YAAY,CAAC,IAAI,CAACF,aAAa,CAAC;IACzC;EACF;EAEAG,MAAMA,CAACC,KAAY;IACjBA,KAAK,CAACC,cAAc,EAAE;IACtB,IAAI,CAACC,WAAW,EAAE;EACpB;EAEQT,oBAAoBA,CAAA;IAC1B,MAAMU,KAAK,GAAG,IAAI,CAACC,QAAQ,EAAEC,aAAa;IAC1C,IAAI,CAACF,KAAK,EAAE;MACV,IAAI,CAACD,WAAW,EAAE;MAClB;IACF;IAEAC,KAAK,CAACG,gBAAgB,CAAC,OAAO,EAAE,MAAM,IAAI,CAACJ,WAAW,EAAE,CAAC;IACzDC,KAAK,CAACG,gBAAgB,CAAC,OAAO,EAAE,MAAM,IAAI,CAACJ,WAAW,EAAE,CAAC;EAC3D;EAEQR,oBAAoBA,CAAA;IAC1B,IAAI,CAACL,IAAI,CAACkB,iBAAiB,CAAC,MAAK;MAC/B,IAAI,CAACX,aAAa,GAAGC,MAAM,CAACW,UAAU,CAAC,MAAK;QAC1C,MAAML,KAAK,GAAG,IAAI,CAACC,QAAQ,EAAEC,aAAa;QAC1C,IAAI,CAACF,KAAK,IAAIA,KAAK,CAACM,UAAU,GAAG,CAAC,EAAE;UAClC,IAAI,CAACP,WAAW,EAAE;QACpB;MACF,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,CAAC;EACJ;EAEQA,WAAWA,CAAA;IACjB,IAAI,IAAI,CAACX,SAAS,EAAE;MAClB;IACF;IACA,IAAI,CAACA,SAAS,GAAG,IAAI;IAErB,MAAMmB,SAAS,GAAG,IAAI,CAACC,UAAU,CAACN,aAAa;IAC/C,MAAMF,KAAK,GAAG,IAAI,CAACC,QAAQ,EAAEC,aAAa;IAE1C,IAAI,CAAChB,IAAI,CAACkB,iBAAiB,CAAC,MAAK;MAC/BrB,IAAI,CAAC0B,EAAE,CAACF,SAAS,EAAE;QACjBG,SAAS,EAAE,CAAC;QACZC,QAAQ,EAAE,GAAG;QACbC,UAAU,EAAEA,CAAA,KAAK;UACfL,SAAS,CAACM,SAAS,CAACC,GAAG,CAAC,QAAQ,CAAC;UACjC,IAAI,CAAC5B,IAAI,CAAC6B,GAAG,CAAC,MAAK;YACjB,IAAI,CAAC5B,MAAM,CAAC6B,IAAI,EAAE;UACpB,CAAC,CAAC;QACJ;OACD,CAAC;MAEF,IAAI;QACFhB,KAAK,EAAEiB,KAAK,EAAE;MAChB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACC,IAAI,CAAC,6BAA6B,EAAEF,KAAK,CAAC;MACpD;IACF,CAAC,CAAC;EACJ;;;uBA/EWlC,qBAAqB,EAAAqC,EAAA,CAAAC,iBAAA,CAAAD,EAAA,CAAAE,MAAA;IAAA;EAAA;;;YAArBvC,qBAAqB;MAAAwC,SAAA;MAAAC,SAAA,WAAAC,4BAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}